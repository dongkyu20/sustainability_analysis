function jf_blockUISizeSet(){if($(".blockMsg").size()>0){var e=$(window).width();$(".blockMsg").css("width","780px"),e<=768&&e>380?$(".blockMsg").css("width","90%"):e<=380&&$(".blockMsg").css("width","96%");var t=$(".blockMsg").width();if(null!=t){var a=e/2-t/2;$(".blockMsg").css("left",a+"px")}var l=$(window).height(),n=$(".blockMsg").height();if(null!=n){var o=l/2-n/2;$(".blockMsg").css("top",o+"px")}}}function blockUI(e){if(null!=e){-1==e.indexOf("iframe")&&(e='<div class="_blockWrap">'+e+"</div>");var t='<div class="_blockInner">\t<a href="#close" onclick="$.unblockUI();" class="_blockClose">close</a>\t'+e+"</div>";$.blockUI({message:t}),jf_blockUISizeSet()}else $.blockUI({css:{border:"none",padding:"15px",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px",opacity:.5,color:"#fff"}})}function unblockUI(){$.unblockUI()}function numbersonly(e,t){var a,l;if(window.event)a=window.event.keyCode;else{if(!e)return!0;a=e.which}return l=String.fromCharCode(a),null==a||0==a||8==a||9==a||13==a||27==a||45==a||"0123456789".indexOf(l)>-1||!(!t||"."!=l)}function trim(e){return null!=e?e.replace(/(^\s*)|(\s*$)/g,""):e}function jf_ajaxSubmit(e){var t=!0,a=$(e).attr("action"),l={},n=$(e).serializeArray();return $(n).each((function(){"layout"==this.name?l[this.name]="":l[this.name]=this.value||""})),$.ajax({type:"post",url:a,async:!1,cache:!1,data:l,success:function(a){t=null==a||null==a||""==a,$(e).find("div._formCheck").remove(),t||$(a).each((function(){$.each(this,(function(e,t){if(-1==e.indexOf("duplicate_")){var a="";a+="<div class='_formCheck'>",a+="\t<span class='_err'>",a+="\t\t"+t,a+="\t</span>",a+="</div>",$("#"+e).after(a)}else a="",a+="<div class='_formCheck'>",a+="\t<span class='_dup'>",a+="\t\t"+t,a+="\t</span>",a+="</div>",$("#"+e.replace("duplicate_","")).after(a)}))}))},error:function(){alert("error!")}}),t}jQuery(window).on("load resize scroll",(function(){jf_blockUISizeSet()})),$(document).on("keyup",(function(e){$(".blockMsg").size()>0&&27==e.keyCode&&$.unblockUI()})),$((function(){$(document).on("click","._blockUI",(function(){if($(this).is("a")){var e=$(this).attr("href"),t=$(this).attr("class").replace("_blockUI ",""),a='<div class="_blockInner">\t<a href="#close" onclick="$.unblockUI();" class="_blockClose">close</a>\t<iframe name="blockUI" src="'+e+"\" class='"+t+"'></iframe></div>";$.blockUI({message:a});var l=$(".blockMsg").attr("class")+" "+t;return $(".blockMsg").attr("class",l),jf_blockUISizeSet(),!1}}))}));var trueCheck=!1;function confirm(e,t,a){return trueCheck||(0==$("#confirmDivTemp").size()&&$("body").append("<div id='confirmDivTemp' class='_alertWrap'>\t<div class='_alertHeader'>\t\t<h2>Confirm</h2>\t</div>\t<div class='_alertBody'><p class='message'></p></div>\t<div class='_alertFooter'>\t\t<input type='button' class='confirmBtnOk' value='Yes'>\t\t<input type='button' class='confirmBtnCancel' value='No'>\t</div></div>"),$("#confirmDivTemp").modal({closeHTML:"<button title='Close' class='modal-close'>close</button>",overlayId:"confirm-overlay",containerId:"confirm-container",dataId:"confirm-data",onOpen:function(e){e.overlay.fadeIn(150,(function(){e.container.slideDown(150,(function(){e.data.fadeIn(150)}))}))},onShow:function(l){var n=this;$(".message",l.data[0]).append(e),$(".confirmBtnOk").on("click",(function(){trueCheck=!0,n.close(),$.isFunction(t)&&t(),trueCheck=!1})),$(".confirmBtnCancel").on("click",(function(){trueCheck=!1,n.close(),$.isFunction(a)&&a()}))}}),trueCheck)}function alert(e,t){if(0==$("#alertDivTemp").size()){var a="<div id='alertDivTemp' class='_alertWrap'>\t<div class='_alertHeader'>\t\t<h2>Message</h2>\t</div>\t<div class='_alertBody'><p class='alertMessage'></p></div>\t<div class='_alertFooter'>\t\t<input type='button' class='alertBtnOk' value='"+ktext("k2web.confirm")+"'>\t</div></div>";$("body").append(a)}null!=e&&""!=e&&"string"==typeof e&&(e=e.replace(/\n/gi,"<br/>")),$("#alertDivTemp .alertMessage").html(e),$("#alertDivTemp").modal({closeHTML:"<button title='Close' class='modal-close'>close</button>",overlayId:"simplemodal-overlay",containerId:"simplemodal-container"}),$(".alertBtnOk").on("click",(function(){$.isFunction(t)?(t(),$(".simplemodal-close").click()):$(".simplemodal-close").click()}))}function jf_fileUploadFormCommon(e,t,a){if(null==e&&(e=0),null==a&&(a=""),"function"==typeof window.jf_fileUploadCallback){var l="<a href='"+kurl("/fileupload/registView")+"?num="+e+"&fileType="+t+"&siteId="+a+"' class='_blockUI _blockH350' id='blockUIaTagTemp' style='display:none'>temp</a>";$("body").append(l),$("#blockUIaTagTemp").click(),$("#blockUIaTagTemp").remove()}else alert("jf_fileUploadCallback() does not exist!")}var curAlt="";function jf_fileUploadProcCommon(e,t,a){curAlt="";var l=$("#fileCommonTag");""!=$(l).val()?"image"!=t||""!=(curAlt=trim($("#alt").val()))?jf_fileUploadProcCommonResult(jf_fileUploadAjaxCommon(l,t,a,e,"jf_fileUploadProcCommonResult")):alert(ktext("msg.at.do3","","k2web.image.explanation,k2web.enter"),(function(){$("#alt").focus()})):alert(ktext("error.item.exist2","","k2web.select,k2web.file"))}function jf_fileUploadProcCommonResult(e){if(null!=e&&e.result){var t=e.fileDir,a=e.fileRename,l=e.fileOrg,n=e.fileSize,o=e.num;parent.jf_fileUploadCallback(t,l,a,n,o,curAlt),parent.unblockUI()}}function jf_fileUploadAjaxCommon(fileObj,fileType,siteId,num,callback){if(null==fileObj)return null;null==siteId&&(siteId=""),null==num&&(num="");var result=null;if(void 0!==window.FormData){var fd=new FormData;return fd.append("file",fileObj[0].files[0]),fd.append("fileType",fileType),fd.append("siteId",siteId),fd.append("num",num),$.ajax({url:kurl("/fileupload/regist"),type:"POST",data:fd,async:!1,cache:!1,contentType:!1,processData:!1,success:function(e){null!=e&&(e.result?result=e:alert(e.message))}}),result}0==$("#fileIframe").size()&&$("body").append("<iframe name='fileIframe' src='#' id='fileIframe' class='hidden'/>");var form=$(fileObj).closest("form");return null==form?void alert("No search form tag!"):($(form).attr("method","post"),$(form).attr("target","fileIframe"),$(form).attr("enctype","multipart/form-data"),$(form).attr("action",kurl("/fileupload/regist")),0==$(form).find("input[name='siteId']").size()&&$(form).append("<input type='hidden' name='siteId'/>"),0==$(form).find("input[name='fileType']").size()&&$(form).append("<input type='hidden' name='fileType'/>"),0==$(form).find("input[name='viewType']").size()&&$(form).append("<input type='hidden' name='viewType' value='html'/>"),0==$(form).find("input[name='callback']").size()&&$(form).append("<input type='hidden' name='callback' value='"+callback+"'/>"),$(form).find("input[name='siteId']").val(siteId),$(form).find("input[name='fileType']").val(fileType),$(form).submit(),$(form).submit(),$(form).submit(),$("#fileIframe").load((function(e){var data=eval("("+$("#fileIframe").contents().find("body").text()+")");if(null!=data)if(data.result){var callback=data.callback;eval(callback+"(data)")}else alert(data.message)})),null)}function getDoc(e){var t=null;try{e.contentWindow&&(t=e.contentWindow.document)}catch(e){}if(t)return t;try{t=e.contentDocument?e.contentDocument:e.document}catch(a){t=e.document}return t}function curUrlPattern(){var e="",t=location.pathname;return null!=t&&(e=t.substring(t.lastIndexOf("."))),e}function kurl(e){return $.ajax({url:"/kurl"+curUrlPattern(),type:"post",data:{url:e},async:!1,cache:!1,success:function(t){null!=t&&null!=t.url&&(e=t.url)}}),e}function ktext(e,t,a){return ktext(e,t,a,"")}function ktext(e,t,a,l){null!=l&&""!=l&&null!=l||(l=defaultTextSiteId);var n="";return $.ajax({url:"/ktext"+curUrlPattern(),type:"post",data:{key:e,lang:t,argsStr:a,siteId:l},async:!1,cache:!1,success:function(e){null!=e&&null!=e.text&&(n=e.text)}}),n}function klang(){var e="";null!=e&&""!=e&&null!=e||(e=defaultTextSiteId);var t="en";return $.ajax({url:"/klang"+curUrlPattern(),type:"post",data:{siteId:e},async:!1,cache:!1,success:function(e){null!=e&&null!=e.text&&(t=e.text)}}),t}function jf_userInfoList(e,t){if("function"==typeof window.jf_userInfoListCallback){var a="<a href='"+kurl("/fnctmngr/siteMngr/"+e+"/userInfoList")+"' class='_blockUI' id='blockUIaTagTemp' style='display:none'>temp</a>";$("body").append(a),$("#blockUIaTagTemp").click(),$("#blockUIaTagTemp").remove()}else alert("jf_userInfoListCallback() does not exist!")}function jf_searchUserInfoList(e,t){if("function"==typeof window.jf_searchUserInfoListCallback){var a="<a href='"+kurl("/user/topMngr/searchUserList")+"?siteId="+e+"&userId="+t+"' class='_blockUI' id='blockUIaTagTemp' style='display:none'>temp</a>";$("body").append(a),$("#blockUIaTagTemp").click(),$("#blockUIaTagTemp").remove()}else alert("jf_searchUserInfoListCallback() does not exist!")}function jf_searchMiddleUserInfoList(e){if("function"==typeof window.jf_searchMiddleUserInfoListCallback){var t="<a href='"+kurl("/user/searchUserList")+"?siteId="+e+"' class='_blockUI' id='blockUIaTagTemp' style='display:none'>temp</a>";$("body").append(t),$("#blockUIaTagTemp").click(),$("#blockUIaTagTemp").remove()}else alert("jf_searchMiddleUserInfoListCallback() does not exist!")}function jf_orgchtUserAllList(){if("function"==typeof window.jf_orgchtUserAllListCallback){var e="<a href='"+kurl("/orgcht/topMngr/orgchtUserAllList")+"' class='_blockUI' id='blockUIaTagTemp' style='display:none'>temp</a>";$("body").append(e),$("#blockUIaTagTemp").click(),$("#blockUIaTagTemp").remove()}else alert("jf_orgchtUserAllListCallback() does not exist!")}function jf_orgchtTreeList(e,t){if("function"==typeof window.jf_orgchtTreeListCallBack){var a="<a href='"+kurl("/fnctmngr/siteMngr/"+e+"/orgchtTree")+"' class='_blockUI' id='blockUIaTagTemp' style='display:none'>temp</a>";$("body").append(a),$("#blockUIaTagTemp").click(),$("#blockUIaTagTemp").remove()}else alert("jf_orgchtTreeListCallBack() does not exist!")}function jf_orgchtTreeListForUser(e){if("function"==typeof window.jf_orgchtTreeListForUserCallBack){var t="<a href='"+kurl(null!=e&&null!=e&&""!=e?"/orgcht/"+e+"/orgchtTree":"/orgcht/orgchtTree")+"' class='_blockUI' id='blockUIaTagTemp' style='display:none'>temp</a>";$("body").append(t),$("#blockUIaTagTemp").click(),$("#blockUIaTagTemp").remove()}else alert("callback function does not exist!")}function jf_fnctMngr(e,t,a){null==a&&(a="");var l="<a href='"+kurl("/fnctmngr/siteMngr/"+e+"/userIdList")+"?fnctId="+t+"&fnctNo="+a+"' class='_blockUI' id='blockUIaTagTemp' style='display:none'>temp</a>";$("body").append(l),$("#blockUIaTagTemp").click(),$("#blockUIaTagTemp").remove()}function jf_masterSkinList(e){if("function"==typeof window.jf_masterSkinSelectCallback){var t=kurl("/masterskin/siteMngr/"+$("#siteId").val()+"/masterSkinList");null!=e&&(t+="?masterSkinId="+e);var a="<a href='"+t+"' class='_blockUI _masterSkinList' id='blockUIaTagTemp' style='display:none'>"+ktext("k2web.select","","")+"</a>";$("body").append(a),$("#blockUIaTagTemp").click(),$("#blockUIaTagTemp").remove()}else alert("jf_masterSkinSelectCallback() does not exist!")}function jf_accesAuthor(e,t,a,l){null==a&&(a="");var n="<a href='"+kurl("/accesauthor/fnctMngr/"+e+"/list")+"?fnctId="+t+"&fnctNo="+a+"&initViewValue="+l+"' class='_blockUI' id='blockUIaTagTemp' style='display:none'>temp</a>";$("body").append(n),$("#blockUIaTagTemp").click(),$("#blockUIaTagTemp").remove()}function nyroModalClose(){$(".nyroModalClose").click()}function getAjax(e,t,a){var l=null;return null==a&&(a=!1),$.ajax({url:e,headers:{"x-requested-with":"k2web"},type:"post",data:t,cache:!1,async:a,success:function(e){l=e},error:function(e){}}),l}function _getEleMaxNum(e,t){var a=null,l=getAjax(kurl("/site/menuMngr/"+e+"/"+t+"/getEleMaxNum"));return null!=l&&null!=l.maxNum?a=l.maxNum:alert("MaxNum Fail!"),a}function getCurDate(){var e=getAjax(kurl("/curDateJson"));if(null!=e&&null!=e.date){var t=new Date(e.date);if(null!=t)return t}}$.fn.outerHTML=function(){var e=$(this);if(!e[0])return"";if(e[0].outerHTML)return e[0].outerHTML;var t=e.wrap("<p/>").parent().html();return e.unwrap(),t};